var spare = new Array(
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
);
var pan = new Array(
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
);

function showPan() {
    var c = document.getElementById("board");
    var cxt = c.getContext("2d");
    cxt.strokeStyle = "black";

    /* 清空，重新画线等 */
    cxt.clearRect(0, 0, 600, 600);
    cxt.fillStyle = "sandybrown";
    cxt.fillRect(0, 0, 600, 600);
    grid(cxt);
    ninePoints(cxt);
    var temp;
    for (var i = 0; i < 19; i++) {
        for (var j = 0; j < 19; j++) { //画棋子
            temp = pan[i * 19 + j];
            if (temp === 1) { //black
                var rg = cxt.createRadialGradient((i + 1) * 30 - 3, (j + 1) * 30 - 3, 1, (i + 1) * 30 - 4, (j + 1) * 30 - 4, 11);
                rg.addColorStop(1, /*"black"*/ "#202020");
                rg.addColorStop(0, "gray");
                cxt.beginPath();
                cxt.arc((i + 1) * 30, (j + 1) * 30, 15, 0, 2 * Math.PI, false);
                //cxt.fillStyle="black";
                cxt.fillStyle = rg;
                cxt.fill();

            } else if (temp === 2) { //white
                var rg = cxt.createRadialGradient((i + 1) * 30 - 3, (j + 1) * 30 - 3, 1, (i + 1) * 30 - 4, (j + 1) * 30 - 4, 11);
                rg.addColorStop(1, /*"lightgray"*/ "#e0e0e0");
                rg.addColorStop(0, "white");
                cxt.beginPath();
                cxt.arc((i + 1) * 30, (j + 1) * 30, 15, 0, 2 * Math.PI, false);
                //cxt.fillStyle="white";
                cxt.fillStyle = rg;
                cxt.fill();
            } else if (temp === 7) { // fill color
                cxt.beginPath();
                cxt.arc((i + 1) * 30, (j + 1) * 30, 15, 0, 2 * Math.PI, false);
                cxt.fillStyle = "red";
                cxt.fill();
            }
        }
    }
}
//     // 显示手数
//     if (move_show_flag) {
//         for (var m = 0; m < move_record.length - 1; m++) { // 最新的一手由后面的红色标记
//             // 先判断一下棋子还在不在棋盘上
//             if (pan[move_record[m][0]][move_record[m][1]] === 0)
//                 continue;

//             // 而且只应该画最新的数字（打劫后，可能导致一个坐标上重复许多步数）
//             var repeat_move_flag = false;
//             for (var j = m + 1; j < move_record.length; j++) {
//                 if (move_record[m][0] === move_record[j][0] &&
//                     move_record[m][1] === move_record[j][1]) {
//                     repeat_move_flag = true;
//                 break;
//             }
//         }
//         if (repeat_move_flag)
//             continue;

//             // 这下可以放心绘制手数数字啦
//             if (move_record[m][2] % 2 === 1) { //black
//                 cxt.fillStyle = "white";
//             } else {
//                 cxt.fillStyle = "black";
//             }
//             cxt.font = "bold 18px sans-serif";
//             if (move_record[m][2] > 99) {
//                 cxt.font = "bold 16px sans-serif";
//             }
//             cxt.font = "bold 16px sans-serif";
//             cxt.textAlign = "center";
//             var move_msg = move_record[m][2].toString();
//             //cxt.fillText(move_msg, (i+1)*30, (j+1)*30+6);
//             cxt.fillText(move_msg, (move_record[m][0] + 1) * 30, (move_record[m][1] + 1) * 30 + 6);
//         }
//     }
//     // 特别显示最新的一手
//     if (move_record.length > 0) {
//         cxt.fillStyle = "red";
//         var newest_move = move_record.length - 1;
//         cxt.fillRect(
//             (move_record[newest_move][0] + 1) * 30 - 5,
//             (move_record[newest_move][1] + 1) * 30 - 5,
//             10, 10
//             );
//     }
// }
